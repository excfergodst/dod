<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>RishEngine: /home/travis/build/rishteam/dod/RishEngine/src/Effect/Particle/ParticleSystem.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RishEngine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_04f662a1e3276ec14e2545f847e55b3a.html">Effect</a></li><li class="navelem"><a class="el" href="dir_88babceb16b3f87ee55f248a900e9eba.html">Particle</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ParticleSystem.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ParticleSystem_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="ParticleSystem_8h.html">Rish/Effect/Particle/ParticleSystem.h</a>&gt;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Renderer2D_8h.html">Rish/Renderer/Renderer2D.h</a>&gt;</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Random_8h.html">Rish/Math/Random.h</a>&gt;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacerl.html">rl</a> {</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;Ref&lt;Scene&gt; <a class="code" href="classrl_1_1ParticleSystem.html#ac6a81a2ef16af4e7b6860701fc5174c8">ParticleSystem::s_Scene</a>;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno"><a class="line" href="classrl_1_1ParticleSystem.html#a8d5814d710e6129ed5d81146e4f7b871">    9</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classrl_1_1ParticleSystem.html#a8d5814d710e6129ed5d81146e4f7b871">ParticleSystem::RegisterScene</a>(<span class="keyword">const</span> <a class="code" href="namespacerl.html#a3688521dcfa13dfc1a8b11c4962a941a">Ref &lt;Scene&gt;</a> &amp;scene)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;{</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    <a class="code" href="classrl_1_1ParticleSystem.html#ac6a81a2ef16af4e7b6860701fc5174c8">s_Scene</a> = scene;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;}</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="classrl_1_1ParticleSystem.html#a1c56a1a041a90713e83556f0b0b66c54">   14</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classrl_1_1ParticleSystem.html#a1c56a1a041a90713e83556f0b0b66c54">ParticleSystem::onUpdate</a>(<span class="keywordtype">float</span> dt)</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;{</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <span class="keyword">auto</span> &amp;registry = <a class="code" href="classrl_1_1ParticleSystem.html#ac6a81a2ef16af4e7b6860701fc5174c8">s_Scene</a>-&gt;m_registry;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="keyword">auto</span> state = <a class="code" href="classrl_1_1ParticleSystem.html#ac6a81a2ef16af4e7b6860701fc5174c8">s_Scene</a>-&gt;getSceneState();</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <span class="keywordflow">if</span>(state != <a class="code" href="classrl_1_1Scene.html#a3edbc90e5c4f7ae1e5dc763ec4ddfb53ade3c731be5633838089a07179d301d7b">Scene::SceneState::Play</a>)</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keyword">auto</span> view = registry.view&lt;<a class="code" href="structrl_1_1TransformComponent.html">TransformComponent</a>, <a class="code" href="structrl_1_1ParticleComponent.html">ParticleComponent</a>&gt;();</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> entity : view)</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    {</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        <span class="keyword">auto</span> &amp;emitter   = registry.get&lt;<a class="code" href="structrl_1_1ParticleComponent.html">ParticleComponent</a>&gt;(entity);</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        <span class="keyword">auto</span> &amp;transform = registry.get&lt;<a class="code" href="structrl_1_1TransformComponent.html">TransformComponent</a>&gt;(entity);</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keywordflow">if</span> (emitter.active)</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;            <span class="comment">// cal the num that should respawn this frame</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            emitter.emissionRate = (int)(emitter.emitNumber + emitter.emitVariance * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.emitVarianceRand.x, emitter.emitVarianceRand.y));</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; emitter.emissionRate ; i++)</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                <span class="comment">// find the unused Particle</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                <span class="keywordtype">int</span> unusedParticle = <a class="code" href="classrl_1_1ParticleSystem.html#a528c4f0e99a5e4677ef0a13c6291ba60">firstUnusedParticle</a>(registry, entity);</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                <span class="comment">// 激活他</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <a class="code" href="classrl_1_1ParticleSystem.html#a003e338f6c6737bb09483d6570c750a3">respawnParticle</a>(emitter, transform, unusedParticle);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            }</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            <span class="keywordflow">if</span>(emitter.vortexSensitive &amp;&amp; (emitter.vortexType == <a class="code" href="Scene_2Component_8h.html#a629619d8112a2c291c53529cfbc77716">DYNAMIC_VORTEX</a>))</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                emitter.vortexEmissionRate = emitter.vortexEmitNumber;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                <span class="keywordflow">if</span>(emitter.vortexActive)</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; emitter.vortexEmissionRate ; i++)</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                    {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                        <span class="keywordtype">int</span> unusedVortex = <a class="code" href="classrl_1_1ParticleSystem.html#a9143d2a7dae68aafd3e8570e70f0aec6">firstUnusedVortex</a>(registry, entity);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                        <span class="keywordflow">if</span>(unusedVortex == -1)</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                        <a class="code" href="classrl_1_1ParticleSystem.html#afe6e91b499cd748bd5c790740764d39a">respawnVortex</a>(emitter, transform, unusedVortex);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                    }</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            }</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        }</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordflow">if</span>(emitter.vortexSleepTime &gt; 0.f)</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <span class="keywordflow">if</span>(emitter.vortexSleepTimer.getElapsedTime() &lt;= emitter.vortexSleepTime)</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                emitter.vortexActive = <span class="keyword">false</span>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                emitter.vortexActive = <span class="keyword">true</span>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                emitter.vortexSleepTimer.restart();</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        }</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="comment">// Update particles&#39; states by sleep time and life time</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">if</span>(emitter.sleepTime &gt; 0.f)</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keywordflow">if</span>(emitter.sleepTimer.getElapsedTime() &lt;= emitter.sleepTime)</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                emitter.active = <span class="keyword">false</span>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            }</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                emitter.active = <span class="keyword">true</span>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                emitter.sleepTimer.restart();</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">if</span>(emitter.life &gt; 0.f)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="comment">// exceeded</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="keywordflow">if</span>(emitter.lifeTimer.getElapsedTime() &gt;= emitter.life)</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                emitter.active = <span class="keyword">false</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="comment">// Update Dynamic vortex</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">if</span>(emitter.vortexType == <a class="code" href="Scene_2Component_8h.html#a629619d8112a2c291c53529cfbc77716">DYNAMIC_VORTEX</a> &amp;&amp; emitter.vortexSensitive)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;vortex: emitter.dynamic_vortexes)</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                <span class="keywordflow">if</span>(vortex.life &gt; 0.f)</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                    vortex.currentSize  = <a class="code" href="classrl_1_1ParticleSystem.html#a33b4e09b8b848cfd00f378f8ae2cecb4">interpolateBetweenRange</a>(vortex.startSize, vortex.timeStep, vortex.endSize);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                    vortex.currentVel.x = <a class="code" href="classrl_1_1ParticleSystem.html#a33b4e09b8b848cfd00f378f8ae2cecb4">interpolateBetweenRange</a>(vortex.startVel.x, vortex.timeStep, vortex.endVel.x);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                    vortex.currentVel.y = <a class="code" href="classrl_1_1ParticleSystem.html#a33b4e09b8b848cfd00f378f8ae2cecb4">interpolateBetweenRange</a>(vortex.startVel.y, vortex.timeStep, vortex.endVel.y);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                    vortex.pos.x += vortex.currentVel.x * dt;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    vortex.pos.y += vortex.currentVel.y * dt;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                    vortex.timeStep += (1.0f/(float)vortex.startLife);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    <span class="keywordflow">if</span>(vortex.timeStep &gt;= 1.f)</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                        vortex.timeStep = 0.f;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                    vortex.life--;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="comment">// Update particles</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; emitter.poolSize ; i++)</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keyword">auto</span> &amp;particle = emitter.particles[i];</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">if</span>(particle.life &gt; 0.f) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                <span class="comment">// Update</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                <span class="comment">// Interpolate values</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                <span class="comment">// 利用差質法算出目前的資訊</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                particle.currentSize  = <a class="code" href="classrl_1_1ParticleSystem.html#a33b4e09b8b848cfd00f378f8ae2cecb4">interpolateBetweenRange</a>(particle.startSize, particle.timeStep, particle.endSize);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                particle.currentVel.x = <a class="code" href="classrl_1_1ParticleSystem.html#a33b4e09b8b848cfd00f378f8ae2cecb4">interpolateBetweenRange</a>(particle.startVel.x, particle.timeStep, particle.endVel.x);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                particle.currentVel.y = <a class="code" href="classrl_1_1ParticleSystem.html#a33b4e09b8b848cfd00f378f8ae2cecb4">interpolateBetweenRange</a>(particle.startVel.y, particle.timeStep, particle.endVel.y);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                particle.currentColor = <a class="code" href="classrl_1_1ParticleSystem.html#a07feba185e8acd66a0c620e84bd62197">RGBAInterpolation</a>(particle.startColor, particle.timeStep, particle.endColor);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="comment">// 計算受vortex影響的結果</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <span class="comment">// multi vortex</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="keywordtype">float</span> factor_ = 0;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                <span class="keywordtype">float</span> vortexEffectX = 0;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                <span class="keywordtype">float</span> vortexEffectY = 0;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <span class="keywordflow">if</span>(emitter.vortexSensitive)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                    <span class="keywordflow">if</span>(emitter.vortexType == <a class="code" href="Scene_2Component_8h.html#abade3a659d4def55a657793a469374e3">STATIC_VORTEX</a>)</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                        <span class="keywordflow">for</span>(<span class="keyword">auto</span> vortex : emitter.static_vortexes)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                        {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                            <span class="keywordtype">float</span> vortexScaleSize = vortex.currentSize * 0.001;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                            <span class="keywordflow">if</span>(vortex.currentSize == 0.f || vortex.turbulence == glm::vec2(0, 0))</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                            <span class="keywordtype">float</span> dx = particle.pos.x - vortex.pos.x;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                            <span class="keywordtype">float</span> dy = particle.pos.y - vortex.pos.y;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                            <span class="keywordtype">float</span> vx = dy * vortex.turbulence.x;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                            <span class="keywordtype">float</span> vy = dx * vortex.turbulence.y;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                            factor_ = 1.0f/ (1.0f + (dx*dx + dy*dy)/(vortexScaleSize));</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                            vortexEffectX += (vx - particle.currentVel.x) * factor_;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                            vortexEffectY += (vy - particle.currentVel.y) * factor_;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                        }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    <span class="keywordflow">if</span>(emitter.vortexType == <a class="code" href="Scene_2Component_8h.html#a629619d8112a2c291c53529cfbc77716">DYNAMIC_VORTEX</a>)</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                    {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                        <span class="keywordflow">for</span>(<span class="keyword">auto</span> vortex : emitter.dynamic_vortexes)</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                        {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                            <span class="keywordtype">float</span> vortexScaleSize = vortex.currentSize * 0.1;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                            <span class="keywordflow">if</span>(vortex.currentSize == 0.f || vortex.turbulence == glm::vec2(0, 0))</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                            <span class="keywordflow">if</span>(vortex.life &gt; 0.f)</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                            {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                <span class="keywordtype">float</span> dx = particle.pos.x - vortex.pos.x;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                <span class="keywordtype">float</span> dy = particle.pos.y - vortex.pos.y;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                <span class="keywordtype">float</span> vx = -dy * vortex.turbulence.x;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                <span class="keywordtype">float</span> vy = dx * vortex.turbulence.y;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                factor_ = 1.0f/ (1.0f + (dx*dx + dy*dy)/(vortexScaleSize));</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                <span class="keywordtype">float</span> lifeFactor = vortex.life/emitter.vortexMaxParticleLife;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                factor_ *= (1-lifeFactor)*lifeFactor*4;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                vortexEffectX += (vx - particle.currentVel.x) * factor_;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                vortexEffectY += (vy - particle.currentVel.y) * factor_;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                            }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                        }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                particle.pos.x += vortexEffectX + particle.currentVel.x * dt;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                particle.pos.y += vortexEffectY + particle.currentVel.y * dt;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                particle.life--;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                <span class="comment">// 計算差值的time</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                particle.timeStep+= (1.0f/(float)particle.startLife);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                <span class="keywordflow">if</span>(particle.timeStep &gt;= 1.f)</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    particle.timeStep = 0.f;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                <span class="comment">//</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <span class="comment">// 計算rotate速度跟角度</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                particle.currentRotSpeed += particle.startRotSpeed * 0.1;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                particle.angle += dt * particle.currentRotSpeed*10;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                particle.angle = fmod(particle.angle, 360.f);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="classrl_1_1ParticleSystem.html#a7ba5e911de8531966442bff8f8594ae3">  202</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classrl_1_1ParticleSystem.html#a7ba5e911de8531966442bff8f8594ae3">ParticleSystem::onRender</a>()</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;{</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keyword">auto</span> &amp;registry = <a class="code" href="classrl_1_1ParticleSystem.html#ac6a81a2ef16af4e7b6860701fc5174c8">s_Scene</a>-&gt;m_registry;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">auto</span> view = registry.view&lt;<a class="code" href="structrl_1_1TransformComponent.html">TransformComponent</a>, <a class="code" href="structrl_1_1ParticleComponent.html">ParticleComponent</a>&gt;();</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;entity: view)</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keyword">auto</span> &amp;transform = registry.get&lt;<a class="code" href="structrl_1_1TransformComponent.html">TransformComponent</a>&gt;(entity);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keyword">auto</span> &amp;emitter   = registry.get&lt;<a class="code" href="structrl_1_1ParticleComponent.html">ParticleComponent</a>&gt;(entity);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keyword">auto</span> &amp;tag       = registry.get&lt;<a class="code" href="structrl_1_1TagComponent.html">TagComponent</a>&gt;(entity);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="comment">// Draw all living particles</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;particle: emitter.particles)</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">if</span>(particle.life &gt; 0)</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <a class="code" href="classrl_1_1Renderer2D.html#af463abef34dd6d9f754e1eb7b195fcdc">Renderer2D::DrawRotatedQuad</a>(particle.pos,</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                    {particle.currentSize, particle.currentSize}, emitter.texture,</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                    particle.currentColor, particle.angle);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="classrl_1_1ParticleSystem.html#a289d61c34f13b50970afc1caa17b7092">  224</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classrl_1_1ParticleSystem.html#a289d61c34f13b50970afc1caa17b7092">ParticleSystem::onEditorRender</a>(<span class="keywordtype">bool</span> isSimulate)</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;{</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keyword">auto</span> &amp;registry = <a class="code" href="classrl_1_1ParticleSystem.html#ac6a81a2ef16af4e7b6860701fc5174c8">s_Scene</a>-&gt;m_registry;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keyword">auto</span> state = <a class="code" href="classrl_1_1ParticleSystem.html#ac6a81a2ef16af4e7b6860701fc5174c8">s_Scene</a>-&gt;getSceneState();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keyword">auto</span> view = registry.view&lt;<a class="code" href="structrl_1_1TransformComponent.html">TransformComponent</a>, <a class="code" href="structrl_1_1ParticleComponent.html">ParticleComponent</a>&gt;();</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;entity: view)</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keyword">auto</span> &amp;transform = registry.get&lt;<a class="code" href="structrl_1_1TransformComponent.html">TransformComponent</a>&gt;(entity);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keyword">auto</span> &amp;emitter   = registry.get&lt;<a class="code" href="structrl_1_1ParticleComponent.html">ParticleComponent</a>&gt;(entity);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keyword">auto</span> &amp;tag       = registry.get&lt;<a class="code" href="structrl_1_1TagComponent.html">TagComponent</a>&gt;(entity);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">if</span>(isSimulate)</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="comment">// Draw all living particles</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;particle: emitter.particles)</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="keywordflow">if</span>(particle.life &gt; 0)</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    <a class="code" href="classrl_1_1Renderer2D.html#af463abef34dd6d9f754e1eb7b195fcdc">Renderer2D::DrawRotatedQuad</a>(particle.pos,</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                        {particle.currentSize, particle.currentSize}, emitter.texture,</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                        particle.currentColor, particle.angle);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keyword">auto</span> size = (emitter.startSize + emitter.endSize)/2.f * 0.01f;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <a class="code" href="classrl_1_1Renderer2D.html#a2be11c316efbe1448ed038a11a5f12de">Renderer2D::DrawQuad</a>(transform.translate + glm::vec3(emitter.offset, 0),</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                 {size, size},</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                 emitter.texture);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">if</span>(emitter.vortexSensitive)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">if</span>(emitter.vortexType == <a class="code" href="Scene_2Component_8h.html#abade3a659d4def55a657793a469374e3">STATIC_VORTEX</a>)</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <span class="keywordflow">for</span>(<span class="keyword">auto</span> vortex : emitter.static_vortexes)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                    <span class="keywordflow">if</span>(vortex.draw)</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                    {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                        <a class="code" href="classrl_1_1Renderer2D.html#ac69e22f98cfbedd173d80ffc38d012cb">Renderer2D::DrawFgLine</a>(vortex.pos, vortex.pos+glm::vec2{(vortex.turbulence.x &lt; 0 ? -1 : 1)*vortex.currentSize, 0.f}, glm::vec4{0.f, 0.f, 1.f, 1.f});</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                        <a class="code" href="classrl_1_1Renderer2D.html#ac69e22f98cfbedd173d80ffc38d012cb">Renderer2D::DrawFgLine</a>(vortex.pos, vortex.pos+glm::vec2{0.f, (vortex.turbulence.y &lt; 0 ? -1 : 1)*vortex.currentSize}, glm::vec4{0.f, 1.f, 0.f, 1.f});</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                    }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">if</span>(emitter.vortexType == <a class="code" href="Scene_2Component_8h.html#a629619d8112a2c291c53529cfbc77716">DYNAMIC_VORTEX</a> &amp;&amp; emitter.drawVortex)</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <span class="keywordflow">for</span>(<span class="keyword">auto</span> vortex : emitter.dynamic_vortexes)</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                    <span class="keywordflow">if</span>(vortex.life &gt; 0.f)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                    {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                        <a class="code" href="classrl_1_1Renderer2D.html#ac69e22f98cfbedd173d80ffc38d012cb">Renderer2D::DrawFgLine</a>(vortex.pos, vortex.pos+glm::vec2{(vortex.turbulence.x &lt; 0 ? -1 : 1)*vortex.currentSize*100, 0.f}, glm::vec4{0.f, 0.f, 1.f, 1.f});</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                        <a class="code" href="classrl_1_1Renderer2D.html#ac69e22f98cfbedd173d80ffc38d012cb">Renderer2D::DrawFgLine</a>(vortex.pos, vortex.pos+glm::vec2{0.f, (vortex.turbulence.y &lt; 0 ? -1 : 1)*vortex.currentSize*100}, glm::vec4{0.f, 1.f, 0.f, 1.f});</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                    }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">  284</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">ParticleSystem::randomFloat</a>(<span class="keywordtype">float</span> min, <span class="keywordtype">float</span> max)</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;{</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacerl_1_1Math.html#a7c682fb9ab3e92bf38088e9bc686190e">Math::RandomFloat</a>(min, max);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="classrl_1_1ParticleSystem.html#a528c4f0e99a5e4677ef0a13c6291ba60">  289</a></span>&#160;uint32_t <a class="code" href="classrl_1_1ParticleSystem.html#a528c4f0e99a5e4677ef0a13c6291ba60">ParticleSystem::firstUnusedParticle</a>(entt::registry &amp;registry, entt::entity&amp; entity)</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;{</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keyword">auto</span> &amp;emitter = registry.get&lt;<a class="code" href="structrl_1_1ParticleComponent.html">ParticleComponent</a>&gt;(entity);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = emitter.lastUnusedParticle ; i &lt; emitter.poolSize ; i++)</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">if</span>(emitter.particles[i].life &lt;= 0)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            emitter.<a class="code" href="structrl_1_1ParticleComponent.html#ac4e92311590b38062f88d07e2225fcad">lastUnusedParticle</a> = i;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; emitter.lastUnusedVortex ; i++)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span>(emitter.particles[i].life &lt;= 0)</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            emitter.lastUnusedParticle = i;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    emitter.lastUnusedParticle = 0;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">return</span> emitter.lastUnusedParticle;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="classrl_1_1ParticleSystem.html#a003e338f6c6737bb09483d6570c750a3">  315</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classrl_1_1ParticleSystem.html#a003e338f6c6737bb09483d6570c750a3">ParticleSystem::respawnParticle</a>(<a class="code" href="structrl_1_1ParticleComponent.html">ParticleComponent</a> &amp;emitter, <a class="code" href="structrl_1_1TransformComponent.html">TransformComponent</a> &amp;transform, <span class="keywordtype">int</span> unusedParticle)</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;{</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">auto</span> &amp;particle = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a3ecd149df029d47ed0cdfc8b8d208f02">particles</a>[unusedParticle];</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordtype">float</span> startSpeed         = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#af3734aff606f54f01ca3531ae9a40eac">startSpeed</a> * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#ab93e9e210e26fcd7748d5199bff1f47a">startSpeedRand</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#ab93e9e210e26fcd7748d5199bff1f47a">startSpeedRand</a>.y);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordtype">float</span> endSpeed           = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a4aae7b32a1bfd10dc0cc9a153db3db4b">endSpeed</a>   * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a25f64bfcdde845631482ebcd1fad178d">endSpeedRand</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a25f64bfcdde845631482ebcd1fad178d">endSpeedRand</a>.y);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordtype">float</span> randAngle          = <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a7a3bd965dca368363f30a9ceff4dabdb">angleRange</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a7a3bd965dca368363f30a9ceff4dabdb">angleRange</a>.y);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordtype">float</span> randStartSize      = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#aa0d5aa5731a9267ddcbca70bb31633e4">startSize</a>  * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a3b30f6963f321ec9178594bad43dd72d">startSizeRand</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a3b30f6963f321ec9178594bad43dd72d">startSizeRand</a>.y);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordtype">float</span> randEndSize        = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a2dddba9b84152a7031e2f5dbac42825d">endSize</a>    * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a8ff727be7e30ee376754713d3abdde10">endSizeRand</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a8ff727be7e30ee376754713d3abdde10">endSizeRand</a>.y);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordtype">float</span> randRadius         = <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(randStartSize, randEndSize/2);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordtype">float</span> randLife           = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#aba305541fa099122aac5cf99771e5600">maxParticleLife</a> * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a91f0b383dadd018592a4333ad0a77b12">lifeRand</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a91f0b383dadd018592a4333ad0a77b12">lifeRand</a>.y);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordtype">float</span> randRotateSpeed    = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a6e980894d89e291be58f62fb5dee267d">rotateSpeed</a> * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#afc3838a4b3fcaf61b037e6ea9246b17f">rotSpeedRand</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#afc3838a4b3fcaf61b037e6ea9246b17f">rotSpeedRand</a>.y) * 0.1;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordtype">float</span> randRotAngle       = <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(0.f, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a6e980894d89e291be58f62fb5dee267d">rotateSpeed</a> == 0? 0.f : 360.f);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    glm::vec3 distance       = {<a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a396d85d22c9ace35d93c04e8ea9c65b6">disX</a>, -emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a396d85d22c9ace35d93c04e8ea9c65b6">disX</a>), <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a9460e7246256bda00715b3e444dabe73">disY</a>, -emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a9460e7246256bda00715b3e444dabe73">disY</a>), 0.f};</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    particle.pos             = transform.<a class="code" href="structrl_1_1TransformComponent.html#a8bebab453f6d27b53f644147a890ff7e">translate</a> + distance + glm::vec3(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a3004608fcf4377f78f0fd313572204fd">offset</a>, 0);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    particle.startVel        = {startSpeed * cos(glm::radians(randAngle)) * 0.1, startSpeed * sin(glm::radians(randAngle)) * 0.1};</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    particle.endVel          = {endSpeed   * cos(glm::radians(randAngle)) * 0.1, endSpeed   * sin(glm::radians(randAngle)) * 0.1};</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    particle.angle           = randRotAngle;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    particle.startRotSpeed   = particle.currentRotSpeed = randRotateSpeed;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    particle.life            = particle.startLife       = randLife;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    particle.currentSize     = particle.startSize       = randRadius * 0.01;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    particle.endSize         = randEndSize * 0.01;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    particle.timeStep        = 0.f;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    particle.startColor      = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a5baf9f128a0ba8b2faeb80e00f415184">startColor</a>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    particle.endColor        = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a1a2abcca515eb9034e9fc413de54d5e9">endColor</a>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    particle.vortexSensitive = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#abc5389ad0ac33fb9985d29c5136e4cb6">vortexSensitive</a>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="classrl_1_1ParticleSystem.html#a9143d2a7dae68aafd3e8570e70f0aec6">  346</a></span>&#160;uint32_t <a class="code" href="classrl_1_1ParticleSystem.html#a9143d2a7dae68aafd3e8570e70f0aec6">ParticleSystem::firstUnusedVortex</a>(entt::registry &amp;registry, entt::entity&amp; entity)</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">auto</span> &amp;emitter = registry.get&lt;<a class="code" href="structrl_1_1ParticleComponent.html">ParticleComponent</a>&gt;(entity);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = emitter.lastUnusedVortex ; i &lt; emitter.vortexPoolSize ; i++)</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">if</span>(emitter.dynamic_vortexes[i].life &lt;= 0)</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            emitter.<a class="code" href="structrl_1_1ParticleComponent.html#ae345a39a0c88edc878ee51c1d82ef6c4">lastUnusedVortex</a> = i;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; emitter.lastUnusedVortex ; i++)</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">if</span>(emitter.dynamic_vortexes[i].life &lt;= 0)</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            emitter.lastUnusedVortex = i;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    emitter.lastUnusedVortex = 0;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;}</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="classrl_1_1ParticleSystem.html#afe6e91b499cd748bd5c790740764d39a">  372</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classrl_1_1ParticleSystem.html#afe6e91b499cd748bd5c790740764d39a">ParticleSystem::respawnVortex</a>(<a class="code" href="structrl_1_1ParticleComponent.html">ParticleComponent</a> &amp;emitter, <a class="code" href="structrl_1_1TransformComponent.html">TransformComponent</a> &amp;transform, <span class="keywordtype">int</span> unusedVortex)</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;{</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keyword">auto</span> &amp;vortex = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a970f49fd462f6a755e665b8a158e7169">dynamic_vortexes</a>[unusedVortex];</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordtype">float</span> randomAngle    = <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#ae97c3415a8e2d14f5541dbe8f942c235">vortexAngleRange</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#ae97c3415a8e2d14f5541dbe8f942c235">vortexAngleRange</a>.y);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordtype">float</span> startSpeed     = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a610aba601eaed8ece43efb426709c56f">vortexStartSpeed</a> * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a506e3f6b397c3c3e7fc1529199114957">vortexStartSpeedRand</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a506e3f6b397c3c3e7fc1529199114957">vortexStartSpeedRand</a>.y);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">float</span> endSpeed       = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a7bdf537d85a59a8b0078b77e64a7e03a">vortexEndSpeed</a> * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a6465464cac8a214651afc10193d242af">vortexEndSpeedRand</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a6465464cac8a214651afc10193d242af">vortexEndSpeedRand</a>.y);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordtype">float</span> startSize      = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#afbaec4278513d9cacec8d5151d37df52">vortexStartSize</a> * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#ac0695d086ac58348bb5578d2abee2247">vortexStartSizeRand</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#ac0695d086ac58348bb5578d2abee2247">vortexStartSizeRand</a>.y);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordtype">float</span> endSize        = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#aaf667918219df6061eb0a4e32fa67018">vortexEndSize</a> * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a9109e4f76ecf40c20952dcdba31da9b9">vortexEndSizeRand</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a9109e4f76ecf40c20952dcdba31da9b9">vortexEndSizeRand</a>.y);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordtype">float</span> randLife       = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#acf9693908326b1b8c1fed3ea579ef6c4">vortexMaxParticleLife</a> * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a944ce201bf5e8286a63116e7ad073b87">vortexLifeRand</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a944ce201bf5e8286a63116e7ad073b87">vortexLifeRand</a>.y);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    glm::vec2 randTurbulence = emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a62d68b2c5a307d463ca64e9f4c0f9c25">vortexTurbulence</a> * <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a4171744c5a311fb540f75553011b83dd">vortexTurbulenceRand</a>.x, emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a4171744c5a311fb540f75553011b83dd">vortexTurbulenceRand</a>.y);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    glm::vec3 distance = {<a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#ae437df5b23e787f0c64324bffa6e8014">vortexDisX</a>, -emitter.<a class="code" href="structrl_1_1ParticleComponent.html#ae437df5b23e787f0c64324bffa6e8014">vortexDisX</a>), <a class="code" href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">randomFloat</a>(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a0027ef4e2c78886c8b39b4787db00525">vortexDisY</a>, -emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a0027ef4e2c78886c8b39b4787db00525">vortexDisY</a>), 0.f};</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    vortex.pos        = transform.<a class="code" href="structrl_1_1TransformComponent.html#a8bebab453f6d27b53f644147a890ff7e">translate</a> + distance + glm::vec3(emitter.<a class="code" href="structrl_1_1ParticleComponent.html#a9a42bd0530c6d22299f0941a1bb7044c">vortexPos</a>, 0.f);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    vortex.startVel   = {startSpeed * cos(glm::radians(randomAngle))*10, startSpeed * sin(glm::radians(randomAngle))*10};</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    vortex.endVel     = {endSpeed   * cos(glm::radians(randomAngle))*10, endSpeed   * sin(glm::radians(randomAngle))*10};</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    vortex.turbulence = randTurbulence;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    vortex.life = vortex.startLife = randLife;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    vortex.startSize = vortex.currentSize = startSize * 0.01;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    vortex.endSize = endSize * 0.01;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    vortex.timeStep = 0.f;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="classrl_1_1ParticleSystem.html#a33b4e09b8b848cfd00f378f8ae2cecb4">  397</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classrl_1_1ParticleSystem.html#a33b4e09b8b848cfd00f378f8ae2cecb4">ParticleSystem::interpolateBetweenRange</a>(<span class="keywordtype">float</span> min, <span class="keywordtype">float</span> timestep, <span class="keywordtype">float</span> max)</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;{</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">return</span> min + (max - min) * timestep;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="classrl_1_1ParticleSystem.html#a07feba185e8acd66a0c620e84bd62197">  402</a></span>&#160;glm::vec4 <a class="code" href="classrl_1_1ParticleSystem.html#a07feba185e8acd66a0c620e84bd62197">ParticleSystem::RGBAInterpolation</a>(glm::vec4 startColor, <span class="keywordtype">float</span> timestep, glm::vec4 endColor)</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;{</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    glm::vec4 resultColor;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    resultColor = startColor + (endColor - startColor) * timestep;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">return</span> resultColor;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;}</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div><div class="ttc" id="structrl_1_1ParticleComponent_html_a610aba601eaed8ece43efb426709c56f"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a610aba601eaed8ece43efb426709c56f">rl::ParticleComponent::vortexStartSpeed</a></div><div class="ttdeci">float vortexStartSpeed</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00530">Component.h:530</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a1a2abcca515eb9034e9fc413de54d5e9"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a1a2abcca515eb9034e9fc413de54d5e9">rl::ParticleComponent::endColor</a></div><div class="ttdeci">glm::vec4 endColor</div><div class="ttdoc">The color when a particle die. </div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00429">Component.h:429</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a2dddba9b84152a7031e2f5dbac42825d"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a2dddba9b84152a7031e2f5dbac42825d">rl::ParticleComponent::endSize</a></div><div class="ttdeci">float endSize</div><div class="ttdoc">The size when a particle die. </div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00441">Component.h:441</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a8ff727be7e30ee376754713d3abdde10"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a8ff727be7e30ee376754713d3abdde10">rl::ParticleComponent::endSizeRand</a></div><div class="ttdeci">glm::vec2 endSizeRand</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00484">Component.h:484</a></div></div>
<div class="ttc" id="classrl_1_1ParticleSystem_html_a289d61c34f13b50970afc1caa17b7092"><div class="ttname"><a href="classrl_1_1ParticleSystem.html#a289d61c34f13b50970afc1caa17b7092">rl::ParticleSystem::onEditorRender</a></div><div class="ttdeci">static void onEditorRender(bool isSimulate)</div><div class="ttdef"><b>Definition:</b> <a href="ParticleSystem_8cpp_source.html#l00224">ParticleSystem.cpp:224</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a506e3f6b397c3c3e7fc1529199114957"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a506e3f6b397c3c3e7fc1529199114957">rl::ParticleComponent::vortexStartSpeedRand</a></div><div class="ttdeci">glm::vec2 vortexStartSpeedRand</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00557">Component.h:557</a></div></div>
<div class="ttc" id="classrl_1_1ParticleSystem_html_a9143d2a7dae68aafd3e8570e70f0aec6"><div class="ttname"><a href="classrl_1_1ParticleSystem.html#a9143d2a7dae68aafd3e8570e70f0aec6">rl::ParticleSystem::firstUnusedVortex</a></div><div class="ttdeci">static uint32_t firstUnusedVortex(entt::registry &amp;registry, entt::entity &amp;entity)</div><div class="ttdef"><b>Definition:</b> <a href="ParticleSystem_8cpp_source.html#l00346">ParticleSystem.cpp:346</a></div></div>
<div class="ttc" id="classrl_1_1ParticleSystem_html_a07feba185e8acd66a0c620e84bd62197"><div class="ttname"><a href="classrl_1_1ParticleSystem.html#a07feba185e8acd66a0c620e84bd62197">rl::ParticleSystem::RGBAInterpolation</a></div><div class="ttdeci">static glm::vec4 RGBAInterpolation(glm::vec4 startColor, float timestep, glm::vec4 endColor)</div><div class="ttdef"><b>Definition:</b> <a href="ParticleSystem_8cpp_source.html#l00402">ParticleSystem.cpp:402</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_acf9693908326b1b8c1fed3ea579ef6c4"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#acf9693908326b1b8c1fed3ea579ef6c4">rl::ParticleComponent::vortexMaxParticleLife</a></div><div class="ttdeci">uint32_t vortexMaxParticleLife</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00551">Component.h:551</a></div></div>
<div class="ttc" id="classrl_1_1ParticleSystem_html_afe6e91b499cd748bd5c790740764d39a"><div class="ttname"><a href="classrl_1_1ParticleSystem.html#afe6e91b499cd748bd5c790740764d39a">rl::ParticleSystem::respawnVortex</a></div><div class="ttdeci">static void respawnVortex(ParticleComponent &amp;emitter, TransformComponent &amp;transform, int unusedVortex)</div><div class="ttdef"><b>Definition:</b> <a href="ParticleSystem_8cpp_source.html#l00372">ParticleSystem.cpp:372</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_aa0d5aa5731a9267ddcbca70bb31633e4"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#aa0d5aa5731a9267ddcbca70bb31633e4">rl::ParticleComponent::startSize</a></div><div class="ttdeci">float startSize</div><div class="ttdoc">The size when a particle generate. </div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00438">Component.h:438</a></div></div>
<div class="ttc" id="Scene_2Component_8h_html_a629619d8112a2c291c53529cfbc77716"><div class="ttname"><a href="Scene_2Component_8h.html#a629619d8112a2c291c53529cfbc77716">DYNAMIC_VORTEX</a></div><div class="ttdeci">#define DYNAMIC_VORTEX</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00505">Component.h:505</a></div></div>
<div class="ttc" id="classrl_1_1Renderer2D_html_af463abef34dd6d9f754e1eb7b195fcdc"><div class="ttname"><a href="classrl_1_1Renderer2D.html#af463abef34dd6d9f754e1eb7b195fcdc">rl::Renderer2D::DrawRotatedQuad</a></div><div class="ttdeci">static void DrawRotatedQuad(const glm::vec2 &amp;position, const glm::vec2 &amp;size, const glm::vec4 &amp;color, float rotate)</div><div class="ttdef"><b>Definition:</b> <a href="Renderer2D_8cpp_source.html#l00797">Renderer2D.cpp:797</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a0027ef4e2c78886c8b39b4787db00525"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a0027ef4e2c78886c8b39b4787db00525">rl::ParticleComponent::vortexDisY</a></div><div class="ttdeci">float vortexDisY</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00521">Component.h:521</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_abc5389ad0ac33fb9985d29c5136e4cb6"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#abc5389ad0ac33fb9985d29c5136e4cb6">rl::ParticleComponent::vortexSensitive</a></div><div class="ttdeci">bool vortexSensitive</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00508">Component.h:508</a></div></div>
<div class="ttc" id="classrl_1_1ParticleSystem_html_ac6a81a2ef16af4e7b6860701fc5174c8"><div class="ttname"><a href="classrl_1_1ParticleSystem.html#ac6a81a2ef16af4e7b6860701fc5174c8">rl::ParticleSystem::s_Scene</a></div><div class="ttdeci">static Ref&lt; Scene &gt; s_Scene</div><div class="ttdef"><b>Definition:</b> <a href="ParticleSystem_8h_source.html#l00030">ParticleSystem.h:30</a></div></div>
<div class="ttc" id="classrl_1_1ParticleSystem_html_a8d5814d710e6129ed5d81146e4f7b871"><div class="ttname"><a href="classrl_1_1ParticleSystem.html#a8d5814d710e6129ed5d81146e4f7b871">rl::ParticleSystem::RegisterScene</a></div><div class="ttdeci">static void RegisterScene(const Ref&lt; Scene &gt; &amp;scene)</div><div class="ttdef"><b>Definition:</b> <a href="ParticleSystem_8cpp_source.html#l00009">ParticleSystem.cpp:9</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a25f64bfcdde845631482ebcd1fad178d"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a25f64bfcdde845631482ebcd1fad178d">rl::ParticleComponent::endSpeedRand</a></div><div class="ttdeci">glm::vec2 endSpeedRand</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00482">Component.h:482</a></div></div>
<div class="ttc" id="structrl_1_1TransformComponent_html"><div class="ttname"><a href="structrl_1_1TransformComponent.html">rl::TransformComponent</a></div><div class="ttdoc">Transform. </div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00090">Component.h:90</a></div></div>
<div class="ttc" id="classrl_1_1ParticleSystem_html_a528c4f0e99a5e4677ef0a13c6291ba60"><div class="ttname"><a href="classrl_1_1ParticleSystem.html#a528c4f0e99a5e4677ef0a13c6291ba60">rl::ParticleSystem::firstUnusedParticle</a></div><div class="ttdeci">static uint32_t firstUnusedParticle(entt::registry &amp;registry, entt::entity &amp;entity)</div><div class="ttdef"><b>Definition:</b> <a href="ParticleSystem_8cpp_source.html#l00289">ParticleSystem.cpp:289</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a3ecd149df029d47ed0cdfc8b8d208f02"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a3ecd149df029d47ed0cdfc8b8d208f02">rl::ParticleComponent::particles</a></div><div class="ttdeci">std::vector&lt; Particle &gt; particles</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00496">Component.h:496</a></div></div>
<div class="ttc" id="classrl_1_1ParticleSystem_html_a003e338f6c6737bb09483d6570c750a3"><div class="ttname"><a href="classrl_1_1ParticleSystem.html#a003e338f6c6737bb09483d6570c750a3">rl::ParticleSystem::respawnParticle</a></div><div class="ttdeci">static void respawnParticle(ParticleComponent &amp;emitter, TransformComponent &amp;transform, int unusedParticle)</div><div class="ttdef"><b>Definition:</b> <a href="ParticleSystem_8cpp_source.html#l00315">ParticleSystem.cpp:315</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_ae345a39a0c88edc878ee51c1d82ef6c4"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#ae345a39a0c88edc878ee51c1d82ef6c4">rl::ParticleComponent::lastUnusedVortex</a></div><div class="ttdeci">int lastUnusedVortex</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00542">Component.h:542</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_ac4e92311590b38062f88d07e2225fcad"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#ac4e92311590b38062f88d07e2225fcad">rl::ParticleComponent::lastUnusedParticle</a></div><div class="ttdeci">int lastUnusedParticle</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00490">Component.h:490</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a91f0b383dadd018592a4333ad0a77b12"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a91f0b383dadd018592a4333ad0a77b12">rl::ParticleComponent::lifeRand</a></div><div class="ttdeci">glm::vec2 lifeRand</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00487">Component.h:487</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_aba305541fa099122aac5cf99771e5600"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#aba305541fa099122aac5cf99771e5600">rl::ParticleComponent::maxParticleLife</a></div><div class="ttdeci">uint32_t maxParticleLife</div><div class="ttdoc">Particle life. </div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00457">Component.h:457</a></div></div>
<div class="ttc" id="classrl_1_1Scene_html_a3edbc90e5c4f7ae1e5dc763ec4ddfb53ade3c731be5633838089a07179d301d7b"><div class="ttname"><a href="classrl_1_1Scene.html#a3edbc90e5c4f7ae1e5dc763ec4ddfb53ade3c731be5633838089a07179d301d7b">rl::Scene::SceneState::Play</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a9460e7246256bda00715b3e444dabe73"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a9460e7246256bda00715b3e444dabe73">rl::ParticleComponent::disY</a></div><div class="ttdeci">float disY</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00420">Component.h:420</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a5baf9f128a0ba8b2faeb80e00f415184"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a5baf9f128a0ba8b2faeb80e00f415184">rl::ParticleComponent::startColor</a></div><div class="ttdeci">glm::vec4 startColor</div><div class="ttdoc">The color when a particle generate. </div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00426">Component.h:426</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a3004608fcf4377f78f0fd313572204fd"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a3004608fcf4377f78f0fd313572204fd">rl::ParticleComponent::offset</a></div><div class="ttdeci">glm::vec2 offset</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00415">Component.h:415</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a396d85d22c9ace35d93c04e8ea9c65b6"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a396d85d22c9ace35d93c04e8ea9c65b6">rl::ParticleComponent::disX</a></div><div class="ttdeci">float disX</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00418">Component.h:418</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_aaf667918219df6061eb0a4e32fa67018"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#aaf667918219df6061eb0a4e32fa67018">rl::ParticleComponent::vortexEndSize</a></div><div class="ttdeci">float vortexEndSize</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00539">Component.h:539</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a6e980894d89e291be58f62fb5dee267d"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a6e980894d89e291be58f62fb5dee267d">rl::ParticleComponent::rotateSpeed</a></div><div class="ttdeci">float rotateSpeed</div><div class="ttdoc">The speed that the particle texture rotate. </div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00444">Component.h:444</a></div></div>
<div class="ttc" id="classrl_1_1ParticleSystem_html_a1c56a1a041a90713e83556f0b0b66c54"><div class="ttname"><a href="classrl_1_1ParticleSystem.html#a1c56a1a041a90713e83556f0b0b66c54">rl::ParticleSystem::onUpdate</a></div><div class="ttdeci">static void onUpdate(float dt)</div><div class="ttdef"><b>Definition:</b> <a href="ParticleSystem_8cpp_source.html#l00014">ParticleSystem.cpp:14</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a9a42bd0530c6d22299f0941a1bb7044c"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a9a42bd0530c6d22299f0941a1bb7044c">rl::ParticleComponent::vortexPos</a></div><div class="ttdeci">glm::vec2 vortexPos</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00524">Component.h:524</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a62d68b2c5a307d463ca64e9f4c0f9c25"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a62d68b2c5a307d463ca64e9f4c0f9c25">rl::ParticleComponent::vortexTurbulence</a></div><div class="ttdeci">glm::vec2 vortexTurbulence</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00565">Component.h:565</a></div></div>
<div class="ttc" id="classrl_1_1ParticleSystem_html_af59e4cac01f30075e54a5346bd573314"><div class="ttname"><a href="classrl_1_1ParticleSystem.html#af59e4cac01f30075e54a5346bd573314">rl::ParticleSystem::randomFloat</a></div><div class="ttdeci">static float randomFloat(float min, float max)</div><div class="ttdef"><b>Definition:</b> <a href="ParticleSystem_8cpp_source.html#l00284">ParticleSystem.cpp:284</a></div></div>
<div class="ttc" id="structrl_1_1TransformComponent_html_a8bebab453f6d27b53f644147a890ff7e"><div class="ttname"><a href="structrl_1_1TransformComponent.html#a8bebab453f6d27b53f644147a890ff7e">rl::TransformComponent::translate</a></div><div class="ttdeci">glm::vec3 translate</div><div class="ttdoc">Translation. </div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00092">Component.h:92</a></div></div>
<div class="ttc" id="namespacerl_html"><div class="ttname"><a href="namespacerl.html">rl</a></div><div class="ttdoc">Keycodes. </div><div class="ttdef"><b>Definition:</b> <a href="Animation_8h_source.html#l00022">Animation.h:22</a></div></div>
<div class="ttc" id="Scene_2Component_8h_html_abade3a659d4def55a657793a469374e3"><div class="ttname"><a href="Scene_2Component_8h.html#abade3a659d4def55a657793a469374e3">STATIC_VORTEX</a></div><div class="ttdeci">#define STATIC_VORTEX</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00504">Component.h:504</a></div></div>
<div class="ttc" id="classrl_1_1Renderer2D_html_a2be11c316efbe1448ed038a11a5f12de"><div class="ttname"><a href="classrl_1_1Renderer2D.html#a2be11c316efbe1448ed038a11a5f12de">rl::Renderer2D::DrawQuad</a></div><div class="ttdeci">static void DrawQuad(const glm::vec2 &amp;position, const glm::vec2 &amp;size, const glm::vec4 &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="Renderer2D_8cpp_source.html#l00742">Renderer2D.cpp:742</a></div></div>
<div class="ttc" id="Random_8h_html"><div class="ttname"><a href="Random_8h.html">Random.h</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_ab93e9e210e26fcd7748d5199bff1f47a"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#ab93e9e210e26fcd7748d5199bff1f47a">rl::ParticleComponent::startSpeedRand</a></div><div class="ttdeci">glm::vec2 startSpeedRand</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00481">Component.h:481</a></div></div>
<div class="ttc" id="classrl_1_1Renderer2D_html_ac69e22f98cfbedd173d80ffc38d012cb"><div class="ttname"><a href="classrl_1_1Renderer2D.html#ac69e22f98cfbedd173d80ffc38d012cb">rl::Renderer2D::DrawFgLine</a></div><div class="ttdeci">static void DrawFgLine(const glm::vec3 &amp;p0, const glm::vec3 &amp;p1, const glm::vec4 &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="Renderer2D_8cpp_source.html#l00971">Renderer2D.cpp:971</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a7bdf537d85a59a8b0078b77e64a7e03a"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a7bdf537d85a59a8b0078b77e64a7e03a">rl::ParticleComponent::vortexEndSpeed</a></div><div class="ttdeci">float vortexEndSpeed</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00533">Component.h:533</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a3b30f6963f321ec9178594bad43dd72d"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a3b30f6963f321ec9178594bad43dd72d">rl::ParticleComponent::startSizeRand</a></div><div class="ttdeci">glm::vec2 startSizeRand</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00483">Component.h:483</a></div></div>
<div class="ttc" id="structrl_1_1TagComponent_html"><div class="ttname"><a href="structrl_1_1TagComponent.html">rl::TagComponent</a></div><div class="ttdoc">Tag. </div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00069">Component.h:69</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a9109e4f76ecf40c20952dcdba31da9b9"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a9109e4f76ecf40c20952dcdba31da9b9">rl::ParticleComponent::vortexEndSizeRand</a></div><div class="ttdeci">glm::vec2 vortexEndSizeRand</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00561">Component.h:561</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_afbaec4278513d9cacec8d5151d37df52"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#afbaec4278513d9cacec8d5151d37df52">rl::ParticleComponent::vortexStartSize</a></div><div class="ttdeci">float vortexStartSize</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00536">Component.h:536</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_af3734aff606f54f01ca3531ae9a40eac"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#af3734aff606f54f01ca3531ae9a40eac">rl::ParticleComponent::startSpeed</a></div><div class="ttdeci">float startSpeed</div><div class="ttdoc">The speed when a particle generate. </div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00432">Component.h:432</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a6465464cac8a214651afc10193d242af"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a6465464cac8a214651afc10193d242af">rl::ParticleComponent::vortexEndSpeedRand</a></div><div class="ttdeci">glm::vec2 vortexEndSpeedRand</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00558">Component.h:558</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_ae437df5b23e787f0c64324bffa6e8014"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#ae437df5b23e787f0c64324bffa6e8014">rl::ParticleComponent::vortexDisX</a></div><div class="ttdeci">float vortexDisX</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00520">Component.h:520</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a7a3bd965dca368363f30a9ceff4dabdb"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a7a3bd965dca368363f30a9ceff4dabdb">rl::ParticleComponent::angleRange</a></div><div class="ttdeci">glm::vec2 angleRange</div><div class="ttdoc">Particle restrain in the range of angle. </div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00423">Component.h:423</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_ae97c3415a8e2d14f5541dbe8f942c235"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#ae97c3415a8e2d14f5541dbe8f942c235">rl::ParticleComponent::vortexAngleRange</a></div><div class="ttdeci">glm::vec2 vortexAngleRange</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00527">Component.h:527</a></div></div>
<div class="ttc" id="Renderer2D_8h_html"><div class="ttname"><a href="Renderer2D_8h.html">Renderer2D.h</a></div></div>
<div class="ttc" id="classrl_1_1ParticleSystem_html_a33b4e09b8b848cfd00f378f8ae2cecb4"><div class="ttname"><a href="classrl_1_1ParticleSystem.html#a33b4e09b8b848cfd00f378f8ae2cecb4">rl::ParticleSystem::interpolateBetweenRange</a></div><div class="ttdeci">static float interpolateBetweenRange(float min, float timestep, float max)</div><div class="ttdef"><b>Definition:</b> <a href="ParticleSystem_8cpp_source.html#l00397">ParticleSystem.cpp:397</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_afc3838a4b3fcaf61b037e6ea9246b17f"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#afc3838a4b3fcaf61b037e6ea9246b17f">rl::ParticleComponent::rotSpeedRand</a></div><div class="ttdeci">glm::vec2 rotSpeedRand</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00485">Component.h:485</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html"><div class="ttname"><a href="structrl_1_1ParticleComponent.html">rl::ParticleComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00405">Component.h:405</a></div></div>
<div class="ttc" id="namespacerl_1_1Math_html_a7c682fb9ab3e92bf38088e9bc686190e"><div class="ttname"><a href="namespacerl_1_1Math.html#a7c682fb9ab3e92bf38088e9bc686190e">rl::Math::RandomFloat</a></div><div class="ttdeci">float RandomFloat(float lower, float upper)</div><div class="ttdef"><b>Definition:</b> <a href="Random_8cpp_source.html#l00013">Random.cpp:13</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a970f49fd462f6a755e665b8a158e7169"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a970f49fd462f6a755e665b8a158e7169">rl::ParticleComponent::dynamic_vortexes</a></div><div class="ttdeci">std::vector&lt; Particle &gt; dynamic_vortexes</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00502">Component.h:502</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_ac0695d086ac58348bb5578d2abee2247"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#ac0695d086ac58348bb5578d2abee2247">rl::ParticleComponent::vortexStartSizeRand</a></div><div class="ttdeci">glm::vec2 vortexStartSizeRand</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00560">Component.h:560</a></div></div>
<div class="ttc" id="ParticleSystem_8h_html"><div class="ttname"><a href="ParticleSystem_8h.html">ParticleSystem.h</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a4aae7b32a1bfd10dc0cc9a153db3db4b"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a4aae7b32a1bfd10dc0cc9a153db3db4b">rl::ParticleComponent::endSpeed</a></div><div class="ttdeci">float endSpeed</div><div class="ttdoc">The speed when a particle die. </div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00435">Component.h:435</a></div></div>
<div class="ttc" id="namespacerl_html_a3688521dcfa13dfc1a8b11c4962a941a"><div class="ttname"><a href="namespacerl.html#a3688521dcfa13dfc1a8b11c4962a941a">rl::Ref</a></div><div class="ttdeci">std::shared_ptr&lt; T &gt; Ref</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00089">Core.h:89</a></div></div>
<div class="ttc" id="classrl_1_1ParticleSystem_html_a7ba5e911de8531966442bff8f8594ae3"><div class="ttname"><a href="classrl_1_1ParticleSystem.html#a7ba5e911de8531966442bff8f8594ae3">rl::ParticleSystem::onRender</a></div><div class="ttdeci">static void onRender()</div><div class="ttdef"><b>Definition:</b> <a href="ParticleSystem_8cpp_source.html#l00202">ParticleSystem.cpp:202</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a944ce201bf5e8286a63116e7ad073b87"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a944ce201bf5e8286a63116e7ad073b87">rl::ParticleComponent::vortexLifeRand</a></div><div class="ttdeci">glm::vec2 vortexLifeRand</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00559">Component.h:559</a></div></div>
<div class="ttc" id="structrl_1_1ParticleComponent_html_a4171744c5a311fb540f75553011b83dd"><div class="ttname"><a href="structrl_1_1ParticleComponent.html#a4171744c5a311fb540f75553011b83dd">rl::ParticleComponent::vortexTurbulenceRand</a></div><div class="ttdeci">glm::vec2 vortexTurbulenceRand</div><div class="ttdef"><b>Definition:</b> <a href="Scene_2Component_8h_source.html#l00562">Component.h:562</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
